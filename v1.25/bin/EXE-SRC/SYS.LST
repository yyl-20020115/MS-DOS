Microsoft (R) Macro Assembler  Version 4.00                 11/28/25 13:41:59
                                                            Page     1-1
                                                            

                                 
                                 
                                ; 
                                ; +--------------------------------------------
				-----------------------------+ 
                                ; |   This file has been generated by The Inter
				active Disassembler (IDA)    | 
                                ; |           Copyright (c) 2017 Hex-Rays, <sup
				port@hex-rays.com>           | 
                                ; |                      License info: 48-3FBD-
				7F04-2C                      | 
                                ; |                      Jiang Ying, Personal l
				icense                       | 
                                ; +--------------------------------------------
				-----------------------------+ 
                                ; 
                                ; Input SHA256 : EAF5E7DBD3EDBEF716765FFB0A7554
				351061A6E80AF5AE4CEC5707D76CB7D7E1 
                                ; Input MD5    : F4759B60F3A5FB8B8323CED9B2437E
				5A 
                                ; Input CRC32  : 15474B84 
                                 
                                ; File Name   : D:\Working\MS-DOS\v1.25\bin\EXE
				-SRC\SYS.COM 
                                ; Format      : MS-DOS COM-file 
                                ; Base Address: 1000h Range: 10100h-1035Dh Load
				ed length: 25Dh 
                                 
                                                .8086 
                                ;               .model tiny 
                                 
                                ; =============================================
				============================== 
                                 
                                ; Segment type: Pure code 
 0000                           seg000          segment byte public 'CODE' 
                                                assume cs:seg000 
 0100                                           org 100h 
                                                assume es:nothing, ss:nothing, 
				ds:seg000 
                                 
                                ; =============== S U B R O U T I N E =========
				============================== 
                                 
                                ; Attributes: noreturn 
                                 
                                                public start 
 0100                           start           proc near 
 0100  EB 22                                    jmp     short loc_10124 
                                ; ---------------------------------------------
				------------------------------ 
                                 
 0102                           loc_10102:                              ; CODE 
				XREF: start+29↓j 
Microsoft (R) Macro Assembler  Version 4.00                 11/28/25 13:41:59
                                                            Page     1-2
                                                            

 0102  BA 0254                                  mov     dx, 254h 
 0105  E9 01C9 R                                jmp     loc_101C9 
                                ; ---------------------------------------------
				------------------------------ 
                                 
 0108                           loc_10108:                              ; CODE 
				XREF: start+2D↓j 
                                                                        ; start
				+34↓j ... 
 0108  BA 0238                                  mov     dx, 238h 
 010B  E9 01C9 R                                jmp     loc_101C9 
                                ; ---------------------------------------------
				------------------------------ 
                                 
 010E                           loc_1010E:                              ; CODE 
				XREF: start+4E↓j 
                                                                        ; start
				+59↓j 
 010E  A0 02F8 R                                mov     al, byte ptr aInvalidDr
				iveSp+0C0h ; "" 
 0111  04 40                                    add     al, 40h 
 0113  A2 0282 R                                mov     byte ptr aInvalidDriveS
				p+4Ah, al ; "A\r\nand strike any key when ready
				\r\n$"... 
 0116  BA 0266                                  mov     dx, 266h 
 0119  B4 09                                    mov     ah, 9 
 011B  CD 21                                    int     21h             ; DOS -
				 PRINT STRING 
                                                                        ; DS:DX
				 -> string terminated by "$" 
 011D  B8 0C08                                  mov     ax, 0C08h 
 0120  CD 21                                    int     21h             ; DOS -
				 CLEAR KEYBOARD BUFFER 
                                                                        ; AL mu
				st be 01h, 06h, 07h, 08h, or 0Ah. 
 0122  32 C0                                    xor     al, al 
                                 
 0124                           loc_10124:                              ; CODE 
				XREF: start↑j 
 0124  80 3E 005D 20                            cmp     byte ptr ds:5Dh, 20h 
 0129  75 D7                                    jnz     short loc_10102 
 012B  3C FF                                    cmp     al, 0FFh 
 012D  74 D9                                    jz      short loc_10108 
 012F  80 3E 005C 00                            cmp     byte ptr ds:5Ch, 0 
 0134  74 D2                                    jz      short loc_10108 
 0136  B4 19                                    mov     ah, 19h 
 0138  CD 21                                    int     21h             ; DOS -
				 GET DEFAULT DISK NUMBER 
 013A  FE C0                                    inc     al 
 013C  A2 02F8 R                                mov     byte ptr aInvalidDriveS
				p+0C0h, al ; "" 
 013F  38 06 005C                               cmp     ds:5Ch, al 
 0143  74 C3                                    jz      short loc_10108 
 0145  B4 0F                                    mov     ah, 0Fh 
Microsoft (R) Macro Assembler  Version 4.00                 11/28/25 13:41:59
                                                            Page     1-3
                                                            

 0147  BA 02F9                                  mov     dx, 2F9h 
 014A  CD 21                                    int     21h             ; DOS -
				 OPEN DISK FILE 
                                                                        ; DS:DX
				 -> FCB 
                                                                        ; Retur
				n: AL = 00h file found, FFh file not found 
 014C  0A C0                                    or      al, al 
 014E  75 BE                                    jnz     short loc_1010E 
 0150  BA 032B                                  mov     dx, 32Bh 
 0153  B4 0F                                    mov     ah, 0Fh 
 0155  CD 21                                    int     21h             ; DOS -
				 OPEN DISK FILE 
                                                                        ; DS:DX
				 -> FCB 
                                                                        ; Retur
				n: AL = 00h file found, FFh file not found 
 0157  0A C0                                    or      al, al 
 0159  75 B3                                    jnz     short loc_1010E 
 015B  B4 1A                                    mov     ah, 1Ah 
 015D  BA 235E                                  mov     dx, 235Eh 
 0160  CD 21                                    int     21h             ; DOS -
				 SET DISK TRANSFER AREA ADDRESS 
                                                                        ; DS:DX
				 -> disk transfer buffer 
 0162  B8 0001                                  mov     ax, 1 
 0165  A3 030D R                                mov     word_1030E, ax 
 0168  A3 033F R                                mov     word_10340, ax 
 016B  BB 02F9                                  mov     bx, 2F9h 
 016E  B9 8000                                  mov     cx, 8000h 
 0171  E8 01D9 R                                call    read 
 0174  BA 035E                                  mov     dx, 35Eh 
 0177  B4 1A                                    mov     ah, 1Ah 
 0179  CD 21                                    int     21h             ; DOS -
				 SET DISK TRANSFER AREA ADDRESS 
                                                                        ; DS:DX
				 -> disk transfer buffer 
 017B  BB 032B                                  mov     bx, 32Bh 
 017E  B9 2000                                  mov     cx, 2000h 
 0181  E8 01D9 R                                call    read 
 0184  A0 005C                                  mov     al, ds:5Ch 
 0187  A2 0332 R                                mov     byte_10332, al 
 018A  A2 0300 R                                mov     byte_10300, al 
 018D  8A 16 005C                               mov     dl, ds:5Ch 
 0191  B4 1C                                    mov     ah, 1Ch 
 0193  CD 21                                    int     21h             ; DOS -
				 GET ALLOCATION TABLE INFORMATION FOR SPECIFIC 
				DRIVE 
                                                                        ; DL = 
				drive number to check (0=default, 1=A, etc) 
 0195  0E                                       push    cs 
 0196  1F                                       pop     ds 
 0197  B4 00                                    mov     ah, 0 
 0199  F7 E1                                    mul     cx 
Microsoft (R) Macro Assembler  Version 4.00                 11/28/25 13:41:59
                                                            Page     1-4
                                                            

 019B  91                                       xchg    ax, cx 
 019C  BB 02F9                                  mov     bx, 2F9h 
 019F  E8 01EF R                                call    open 
 01A2  75 30                                    jnz     short loc_101D4 
 01A4  BB 032B                                  mov     bx, 32Bh 
 01A7  E8 01EF R                                call    open 
 01AA  77 28                                    ja      short loc_101D4 
 01AC  BA 235E                                  mov     dx, 235Eh 
 01AF  B4 1A                                    mov     ah, 1Ah 
 01B1  CD 21                                    int     21h             ; DOS -
				 SET DISK TRANSFER AREA ADDRESS 
                                                                        ; DS:DX
				 -> disk transfer buffer 
 01B3  BB 02F9                                  mov     bx, 2F9h 
 01B6  E8 0212 R                                call    write 
 01B9  BA 035E                                  mov     dx, 35Eh 
 01BC  B4 1A                                    mov     ah, 1Ah 
 01BE  CD 21                                    int     21h             ; DOS -
				 SET DISK TRANSFER AREA ADDRESS 
                                                                        ; DS:DX
				 -> disk transfer buffer 
 01C0  BB 032B                                  mov     bx, 32Bh 
 01C3  E8 0212 R                                call    write 
 01C6  BA 02E5                                  mov     dx, 2E5h 
                                 
 01C9                           loc_101C9:                              ; CODE 
				XREF: start+5↑j 
                                                                        ; start
				+B↑j ... 
 01C9  B4 09                                    mov     ah, 9 
 01CB  CD 21                                    int     21h             ; DOS -
				 PRINT STRING 
                                                                        ; DS:DX
				 -> string terminated by "$" 
 01CD  CD 20                                    int     20h             ; DOS -
				 PROGRAM TERMINATION 
                                                                        ; retur
				ns to DOS--identical to INT 21/AH=00h 
                                ; ---------------------------------------------
				------------------------------ 
                                 
 01CF                           loc_101CF:                              ; CODE 
				XREF: open+8↓j 
 01CF  BA 02A5                                  mov     dx, 2A5h 
 01D2  EB F5                                    jmp     short loc_101C9 
                                ; ---------------------------------------------
				------------------------------ 
                                 
 01D4                           loc_101D4:                              ; CODE 
				XREF: start+A2↑j 
                                                                        ; start
				+AA↑j 
 01D4  BA 02CC                                  mov     dx, 2CCh 
 01D7  EB F0                                    jmp     short loc_101C9 
Microsoft (R) Macro Assembler  Version 4.00                 11/28/25 13:41:59
                                                            Page     1-5
                                                            

                                start           endp 
                                 
                                 
                                ; =============== S U B R O U T I N E =========
				============================== 
                                 
                                 
 01D9                           read            proc near               ; CODE 
				XREF: start+71↑p 
                                                                        ; start
				+81↑p 
 01D9  B4 27                                    mov     ah, 27h 
 01DB  8B D3                                    mov     dx, bx 
 01DD  CD 21                                    int     21h             ; DOS -
				 RANDOM BLOCK READ 
                                                                        ; DS:DX
				 -> FCB 
                                                                        ; CX = 
				number of records to be read 
 01DF  89 4F 30                                 mov     [bx+30h], cx 
 01E2  8B 47 1B                                 mov     ax, [bx+1Bh] 
 01E5  89 47 2C                                 mov     [bx+2Ch], ax 
 01E8  8B 47 1D                                 mov     ax, [bx+1Dh] 
 01EB  89 47 2E                                 mov     [bx+2Eh], ax 
                                                ;retn 
 01EE  C3                                       ret 
                                read            endp 
                                 
                                 
                                ; =============== S U B R O U T I N E =========
				============================== 
                                 
                                 
 01EF                           open            proc near               ; CODE 
				XREF: start+9F↑p 
                                                                        ; start
				+A7↑p 
 01EF  B4 0F                                    mov     ah, 0Fh 
 01F1  8B D3                                    mov     dx, bx 
 01F3  CD 21                                    int     21h             ; DOS -
				 OPEN DISK FILE 
                                                                        ; DS:DX
				 -> FCB 
                                                                        ; Retur
				n: AL = 00h file found, FFh file not found 
 01F5  0A C0                                    or      al, al 
 01F7  75 D6                                    jnz     short loc_101CF 
 01F9  8B 47 17                                 mov     ax, [bx+17h] 
 01FC  33 D2                                    xor     dx, dx 
 01FE  03 C1                                    add     ax, cx 
 0200  48                                       dec     ax 
 0201  F7 F1                                    div     cx 
 0203  50                                       push    ax 
 0204  8B 47 30                                 mov     ax, [bx+30h] 
Microsoft (R) Macro Assembler  Version 4.00                 11/28/25 13:41:59
                                                            Page     1-6
                                                            

 0207  03 C1                                    add     ax, cx 
 0209  48                                       dec     ax 
 020A  33 D2                                    xor     dx, dx 
 020C  F7 F1                                    div     cx 
 020E  5A                                       pop     dx 
 020F  3B C2                                    cmp     ax, dx 
                                                ;retn 
 0211  C3                                       ret 
                                open            endp 
                                 
                                 
                                ; =============== S U B R O U T I N E =========
				============================== 
                                 
                                 
 0212                           write           proc near               ; CODE 
				XREF: start+B6↑p 
                                                                        ; start
				+C3↑p 
 0212  8B D3                                    mov     dx, bx 
 0214  33 C0                                    xor     ax, ax 
 0216  89 47 28                                 mov     [bx+28h], ax 
 0219  89 47 2A                                 mov     [bx+2Ah], ax 
 021C  40                                       inc     ax 
 021D  89 47 15                                 mov     [bx+15h], ax 
 0220  B4 28                                    mov     ah, 28h 
 0222  8B 4F 30                                 mov     cx, [bx+30h] 
 0225  CD 21                                    int     21h             ; DOS -
				 RANDOM BLOCK WRITE 
                                                                        ; DS:DX
				 -> FCB 
                                                                        ; CX = 
				number of records to be written 
                                                                        ; if ze
				ro, truncate file to current random file positi
				on 
 0227  8B 47 2C                                 mov     ax, [bx+2Ch] 
 022A  89 47 1B                                 mov     [bx+1Bh], ax 
 022D  8B 47 2E                                 mov     ax, [bx+2Eh] 
 0230  89 47 1D                                 mov     [bx+1Dh], ax 
 0233  B4 10                                    mov     ah, 10h 
 0235  CD 21                                    int     21h             ; DOS -
				 CLOSE DISK FILE 
                                                                        ; DS:DX
				 -> FCB 
                                                                        ; Retur
				n: AL = 00h directory update successful 
                                                                        ; FFh f
				ile not found in directory 
                                                ;retn 
 0237  C3                                       ret 
                                write           endp 
                                 
                                ; ---------------------------------------------
Microsoft (R) Macro Assembler  Version 4.00                 11/28/25 13:41:59
                                                            Page     1-7
                                                            

				------------------------------ 
 0238  49 6E 76 61 6C 69 64     aInvalidDriveSp db 'Invalid drive specification
				$Invalid parameter$Insert system disk ' 
       20 64 72 69 76 65 20     
       73 70 65 63 69 66 69     
       63 61 74 69 6F 6E 24     
       49 6E 76 61 6C 69 64     
       20 70 61 72 61 6D 65     
       74 65 72 24 49 6E 73     
       65 72 74 20 73 79 73     
       74 65 6D 20 64 69 73     
       6B 20                    
 0279  69 6E 20 64 72 69 76                     db 'in drive A',0Dh,0Ah 
       65 20 41 0D 0A           
 0285  61 6E 64 20 73 74 72                     db 'and strike any key when rea
				dy',0Dh,0Ah 
       69 6B 65 20 61 6E 79     
       20 6B 65 79 20 77 68     
       65 6E 20 72 65 61 64     
       79 0D 0A                 
 02A4  24 4E 6F 20 72 6F 6F                     db '$No room for system on dest
				ination disk$Incompatible system size$' 
       6D 20 66 6F 72 20 73     
       79 73 74 65 6D 20 6F     
       6E 20 64 65 73 74 69     
       6E 61 74 69 6F 6E 20     
       64 69 73 6B 24 49 6E     
       63 6F 6D 70 61 74 69     
       62 6C 65 20 73 79 73     
       74 65 6D 20 73 69 7A     
       65 24                    
 02E5  53 79 73 74 65 6D 20                     db 'System transferred$',0 
       74 72 61 6E 73 66 65     
       72 72 65 64 24 00        
 02F9  FF                                       db 0FFh, 5 dup(0), 6 
       0005[                                    db 0FFh, 5 dup(0), 6 
            00                  
                         ]      
               06               
 0300  00                       byte_10300      db 0                    ; DATA 
				XREF: start+8A↑w 
 0301  49 42 4D 42 49 4F 20     aIbmbioCom      db 'IBMBIO  COM',0 
       20 43 4F 4D 00           
                                                ;align 2 
 030D  0000                     word_1030E      dw 0                    ; DATA 
				XREF: start+65↑w 
 030F  001C[                                    db 1Ch dup(0), 0FFh, 5 dup(0), 
				6 
            00                  
                         ]      
       0005[   FF               
            00                  
                         ]      
               06               
Microsoft (R) Macro Assembler  Version 4.00                 11/28/25 13:41:59
                                                            Page     1-8
                                                            

 0332  00                       byte_10332      db 0                    ; DATA 
				XREF: start+87↑w 
 0333  49 42 4D 44 4F 53 20     aIbmdosCom      db 'IBMDOS  COM',0 
       20 43 4F 4D 00           
                                                ;align 2 
 033F  0000                     word_10340      dw 0                    ; DATA 
				XREF: start+68↑w 
 0341  001C[                                    db 1Ch dup(0) 
            00                  
                         ]      
                                
 035D                           seg000          ends 
                                 
                                 
                                                end start 
Microsoft (R) Macro Assembler  Version 4.00                 11/28/25 13:41:59
                                                            Symbols-1
                                                             

Segments and Groups:

                N a m e         	Size	Align	Combine Class

SEG000 . . . . . . . . . . . . .  	035D	BYTE	PUBLIC	'CODE'

Symbols:            

                N a m e         	Type	Value	Attr         

AIBMBIOCOM . . . . . . . . . . .  	L BYTE 	0301	SEG000
AIBMDOSCOM . . . . . . . . . . .  	L BYTE 	0333	SEG000
AINVALIDDRIVESP  . . . . . . . .  	L BYTE 	0238	SEG000

BYTE_10300 . . . . . . . . . . .  	L BYTE 	0300	SEG000
BYTE_10332 . . . . . . . . . . .  	L BYTE 	0332	SEG000

LOC_10102  . . . . . . . . . . .  	L NEAR	0102	SEG000
LOC_10108  . . . . . . . . . . .  	L NEAR	0108	SEG000
LOC_1010E  . . . . . . . . . . .  	L NEAR	010E	SEG000
LOC_10124  . . . . . . . . . . .  	L NEAR	0124	SEG000
LOC_101C9  . . . . . . . . . . .  	L NEAR	01C9	SEG000
LOC_101CF  . . . . . . . . . . .  	L NEAR	01CF	SEG000
LOC_101D4  . . . . . . . . . . .  	L NEAR	01D4	SEG000

OPEN . . . . . . . . . . . . . .  	N PROC	01EF	SEG000	Length = 0023

READ . . . . . . . . . . . . . .  	N PROC	01D9	SEG000	Length = 0016

START  . . . . . . . . . . . . .  	N PROC	0100	SEG000	Global	Length = 00D9

WORD_1030E . . . . . . . . . . .  	L WORD 	030D	SEG000
WORD_10340 . . . . . . . . . . .  	L WORD 	033F	SEG000
WRITE  . . . . . . . . . . . . .  	N PROC	0212	SEG000	Length = 0026


    261 Source  Lines
    261 Total   Lines
     41 Symbols

  49248 Bytes symbol space free

      0 Warning Errors
      0 Severe  Errors
